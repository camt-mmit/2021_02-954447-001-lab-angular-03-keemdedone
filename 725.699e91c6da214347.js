"use strict";(self.webpackChunkmy_ng3=self.webpackChunkmy_ng3||[]).push([[725],{4725:(xt,b,l)=>{l.r(b),l.d(b,{GoogleModule:()=>Pt});var g=l(9808),f=l(8093),t=l(7587),N=l(1135),q=l(4671),U=l(4482),F=l(5403);function E(n,r){return n===r}var L=l(2076),p=l(4004),J=l(7579),I=l(6063);class $ extends J.x{constructor(r=1/0,e=1/0,o=I.l){super(),this._bufferSize=r,this._windowTime=e,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,e)}next(r){const{isStopped:e,_buffer:o,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;e||(o.push(r),!i&&o.push(s.now()+c)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(r),{_infiniteTimeWindow:o,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!r.closed;c+=o?1:2)r.next(s[c]);return this._checkFinalizedStatuses(r),e}_trimBuffer(){const{_bufferSize:r,_timestampProvider:e,_buffer:o,_infiniteTimeWindow:i}=this,s=(i?1:2)*r;if(r<1/0&&s<o.length&&o.splice(0,o.length-s),!i){const c=e.now();let u=0;for(let d=1;d<o.length&&o[d]<=c;d+=2)u=d;u&&o.splice(0,u+1)}}}var R=l(3099),m=l(9646),y=l(262),h=l(3900),_=l(1341);function G(n,r,e,o,i,s,c){try{var u=n[s](c),d=u.value}catch(Mt){return void e(Mt)}u.done?r(d):Promise.resolve(d).then(o,i)}function z(n){return function(){var r=this,e=arguments;return new Promise(function(o,i){var s=n.apply(r,e);function c(d){G(s,o,i,c,u,"next",d)}function u(d){G(s,o,i,c,u,"throw",d)}c(void 0)})}}function A(n){const r=new Uint32Array(n/2);return crypto.getRandomValues(r),Array.from(r,e=>("0"+e.toString(16)).slice(-2)).join("")}function v(){return(v=z(function*(n){const e=(new TextEncoder).encode(n);return crypto.subtle.digest("SHA-256",e)})).apply(this,arguments)}var T=l(520);const Z="google-token",O="google-code-verifier",P="google-security-token",M="https://oauth2.googleapis.com/token";let C=(()=>{class n{constructor(e,o,i){this.configuration=e,this.http=o,this.router=i,this.tokenReadySubject=new N.X(null),this.tokenData=null,this.tokenReady$=this.tokenReadySubject.asObservable().pipe(function w(n,r=q.y){return n=null!=n?n:E,(0,U.e)((e,o)=>{let i,s=!0;e.subscribe(new F.Q(o,c=>{const u=r(c);(s||!n(i,u))&&(s=!1,i=u,o.next(c))}))})}());const s=localStorage.getItem(Z);s&&(this.tokenData=JSON.parse(s)),this.codeVerifier=A(56),this.codeChallenge$=(0,L.D)(function D(n){return v.apply(this,arguments)}(this.codeVerifier)).pipe((0,p.U)(c=>function j(n){return function Q(n){let r="",e=new Uint8Array(n),o=e.byteLength;for(var i=0;i<o;i++)r+=String.fromCharCode(e[i]);return btoa(r)}(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(c)),function Y(n,r,e){var o,i;let s,c=!1;return n&&"object"==typeof n?(s=null!==(o=n.bufferSize)&&void 0!==o?o:1/0,r=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,e=n.scheduler):s=null!=n?n:1/0,(0,R.B)({connector:()=>new $(s,r,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}(1)),this.getAccessToken().subscribe(()=>this.emmitTokenReadyEvent())}emmitTokenReadyEvent(){this.tokenReadySubject.next(!!this.tokenData)}setTokenData(e){var o;return null===e?localStorage.removeItem(Z):(!e.refresh_token&&(null===(o=this.tokenData)||void 0===o?void 0:o.refresh_token)&&(e.refresh_token=this.tokenData.refresh_token),e.expires||(e.expires=(new Date).getTime()+1e3*(e.expires_in-10)),localStorage.setItem(Z,JSON.stringify(e))),this.tokenData=e,this.emmitTokenReadyEvent(),(0,m.of)(this.tokenData)}refresh(){var e;return(null===(e=this.tokenData)||void 0===e?void 0:e.refresh_token)?this.http.post(M,{client_id:this.configuration.client_id,client_secret:this.configuration.client_secret,grant_type:"refresh_token",refresh_token:this.tokenData.refresh_token}).pipe((0,y.K)(o=>(console.error(o),(0,m.of)(null))),(0,h.w)(o=>this.setTokenData(o))):(0,m.of)(null)}getAuthorizationLink(){return this.codeChallenge$.pipe((0,p.U)(e=>{const o=A(16);localStorage.setItem(O,this.codeVerifier),localStorage.setItem(P,o);const i=new URL("https://accounts.google.com/o/oauth2/v2/auth");i.searchParams.append("client_id",this.configuration.client_id),i.searchParams.append("redirect_uri",this.configuration.redirect_uri),i.searchParams.append("response_type","code");const s=this.configuration.scopes.join(" ");i.searchParams.append("scope",s),i.searchParams.append("code_challenge",e),i.searchParams.append("code_challenge_method","S256");const c=new URLSearchParams;return c.append("internal_redirect_uri",this.router.url),c.append("security_token",o),i.searchParams.append("state",c.toString()),i.searchParams.append("prompt","consent"),i.searchParams.append("access_type","offline"),i.toString()}))}requestAccessToken(e,o){const i=localStorage.getItem(P);return i&&i===o?this.http.post(M,{client_id:this.configuration.client_id,client_secret:this.configuration.client_secret,code:e,code_verifier:localStorage.getItem(O),grant_type:"authorization_code",redirect_uri:this.configuration.redirect_uri}).pipe((0,y.K)(s=>(console.error(s),(0,m.of)(null))),(0,h.w)(s=>this.setTokenData(s)),(0,p.U)(s=>!!s)):(0,m.of)(!1)}getAccessToken(){if(this.tokenData){const e=(new Date).getTime();return this.tokenData.expires<e?this.refresh().pipe((0,p.U)(o=>o?o.access_token:null)):(0,m.of)(this.tokenData.access_token)}return(0,m.of)(null)}getAuthorizationHeader(){return this.getAccessToken().pipe((0,p.U)(e=>{var o;return e?`${null===(o=this.tokenData)||void 0===o?void 0:o.token_type} ${e}`:null}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.xZ),t.LFG(T.eN),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H=(()=>{class n{constructor(e,o,i){this.tokenService=e,this.route=o,this.router=i,this.errorMsg=null}ngOnInit(){const e=this.route.snapshot.queryParams,o=new URLSearchParams(e.state);e.error?this.errorMsg=e.error:e.code&&this.tokenService.requestAccessToken(e.code,o.get("security_token")).subscribe(i=>{i?this.router.navigateByUrl(o.get("internal_redirect_uri")):this.errorMsg="UNKNOW ERROR !!!"})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C),t.Y36(f.gz),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-authorization-page"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"google-authorization-page works!"),t.qZA())},styles:[""]}),n})(),x=(()=>{class n{constructor(e,o){this.tokenService=e,this.http=o}getAll(e){const o=Object.assign({},e);return this.tokenService.getAuthorizationHeader().pipe((0,h.w)(i=>i?this.http.get("https://people.googleapis.com/v1/people/me/connections?personFields=names,photos,emailAddresses,phoneNumbers",{headers:{Authorization:i},params:o}):(0,m.of)(null)),(0,p.U)(i=>(0,_.jV)(i)))}create(e){return this.tokenService.getAuthorizationHeader().pipe((0,h.w)(o=>o?this.http.post("https://people.googleapis.com/v1/people:createContact?personFields=names",{names:[{givenName:e.givenName,familyName:e.familyName}],phoneNumbers:e.phoneNumbers,emailAddresses:e.emailAddresses},{headers:{Authorization:o}}):(0,m.of)(null)),(0,p.U)(o=>(0,_.zG)(o)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C),t.LFG(T.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a=l(2382);function tt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"input",9),t.TgZ(4,"button",10),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().deleteEmailAddress(s)}),t.TgZ(5,"i",5),t._uU(6," delete "),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.index;t.Q6J("formGroupName",e),t.xp6(2),t.hij("",e+1,".")}}function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._UZ(3,"input",9),t.TgZ(4,"button",10),t.NdJ("click",function(){const s=t.CHM(e).index;return t.oxw().deletePhoneNumber(s)}),t.TgZ(5,"i",5),t._uU(6," delete "),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=r.index;t.Q6J("formGroupName",e),t.xp6(2),t.hij("",e+1,".")}}let nt=(()=>{class n{constructor(e){this.fb=e,this.onTouched=()=>{},this.subscriptions=[]}ngOnInit(){this.formGroup=this.fb.group({givenName:[null,a.kI.required],familyName:[null,a.kI.required],emailAddresses:this.fb.array([]),phoneNumbers:this.fb.array([])}),this.valueChanges$=this.formGroup.valueChanges.pipe((0,p.U)(e=>e))}get emailAddresses(){return this.formGroup.get("emailAddresses")}get phoneNumbers(){return this.formGroup.get("phoneNumbers")}addEmailAddress(e){e.preventDefault(),this.emailAddresses.push(this.fb.group({value:""}))}addPhoneNumber(e){e.preventDefault(),this.phoneNumbers.push(this.fb.group({value:""}))}deletePhoneNumber(e){this.phoneNumbers.removeAt(e)}deleteEmailAddress(e){this.emailAddresses.removeAt(e)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){const o=this.valueChanges$.subscribe(e);this.subscriptions.push(o)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){if(!this.formGroup.invalid)return null;let o=Object.assign({},this.formGroup.errors);return["givenName","familyName","emailAddresses","phoneNumbers"].forEach(i=>{const s=this.formGroup.get(i);s.errors&&(o[i]=s.errors)}),o}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-contacts-control"]],features:[t._Bn([{provide:a.JU,useExisting:n,multi:!0},{provide:a.Cf,useExisting:n,multi:!0}])],decls:23,vars:3,consts:[[1,"create-contact",3,"formGroup"],["type","text","formControlName","givenName",3,"blur"],["type","text","formControlName","familyName",3,"blur"],["formArrayName","emailAddresses",1,"form-insert"],["type","button",1,"add",3,"click"],[1,"material-icons"],["class","form-input",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","phoneNumbers",1,"form-insert"],[1,"form-input",3,"formGroupName"],["type","text","formControlName","value"],["type","button",1,"del",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p"),t.TgZ(2,"b"),t._uU(3,"Name"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("blur",function(){return o.onTouched()}),t.qZA(),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"b"),t._uU(7,"Family Name"),t.qZA(),t.TgZ(8,"input",2),t.NdJ("blur",function(){return o.onTouched()}),t.qZA(),t.qZA(),t.TgZ(9,"div",3),t.TgZ(10,"b"),t._uU(11,"Email"),t.qZA(),t.TgZ(12,"button",4),t.NdJ("click",function(s){return o.addEmailAddress(s)}),t.TgZ(13,"i",5),t._uU(14," add "),t.qZA(),t.qZA(),t.YNc(15,tt,7,2,"div",6),t.qZA(),t.TgZ(16,"div",7),t.TgZ(17,"b"),t._uU(18,"Phone Number"),t.qZA(),t.TgZ(19,"button",4),t.NdJ("click",function(s){return o.addPhoneNumber(s)}),t.TgZ(20,"i",5),t._uU(21," add "),t.qZA(),t.qZA(),t.YNc(22,et,7,2,"div",6),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",o.formGroup),t.xp6(15),t.Q6J("ngForOf",o.emailAddresses.controls),t.xp6(7),t.Q6J("ngForOf",o.phoneNumbers.controls))},directives:[a.JL,a.sg,a.Fj,a.JJ,a.u,a.CE,g.sg,a.x0],styles:['.create-contact[_ngcontent-%COMP%]{margin:auto;width:800px;text-align:right}.create-contact[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:after{padding-left:2ch;content:"::";font-family:monospace;font-size:16px;color:red}.create-contact[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding-right:200px;margin-left:20px;margin-right:170px;text-align:left}.form-insert[_ngcontent-%COMP%]{margin-bottom:30px}.form-insert[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{padding-right:10px;vertical-align:5px}.form-insert[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%]{margin:0 500px 0 0;background-color:transparent;border-color:#00f;color:#00f;border-radius:20%;cursor:pointer}.form-insert[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{text-align:right;margin:auto}.form-insert[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding-right:180px;margin:20px 20px -20px}.form-insert[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%] > .del[_ngcontent-%COMP%]{margin-right:125px;background-color:transparent;border:none;color:red;cursor:pointer;vertical-align:-7px}']}),n})(),ot=(()=>{class n{constructor(e){this.fb=e,this.data=null,this.dataChange=new t.vpe,this.cancel=new t.vpe,this.errorMsg=null}ngOnInit(){this.formGroup=this.fb.group({person:[this.data,[a.kI.required]]})}onSubmit(){if(this.errorMsg=null,this.formGroup.invalid)this.errorMsg="Invalid form data!!!";else{const e=this.formGroup.get("person");this.dataChange.emit(e.value)}}onCancel(){this.cancel.emit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-contacts-form"]],inputs:{data:"data"},outputs:{dataChange:"dataChange",cancel:"cancel"},decls:13,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","person"],[1,"button"],["type","submit",1,"save"],[1,"material-icons"],["type","button",1,"cancel",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t._UZ(1,"app-google-contacts-control",1),t.TgZ(2,"div",2),t.TgZ(3,"button",3),t.TgZ(4,"i",4),t._uU(5," save "),t.qZA(),t.TgZ(6,"b"),t._uU(7,"Save"),t.qZA(),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return o.onCancel()}),t.TgZ(9,"i",4),t._uU(10," cancel "),t.qZA(),t.TgZ(11,"b"),t._uU(12,"Cancel"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&t.Q6J("formGroup",o.formGroup)},directives:[a._Y,a.JL,a.sg,nt,a.JJ,a.u],styles:[".button[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%]{background:transparent;border-color:#00f;cursor:pointer;margin-right:10px}.button[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#00f}.button[_ngcontent-%COMP%] > .save[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{vertical-align:7px;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}.button[_ngcontent-%COMP%] > .cancel[_ngcontent-%COMP%]{background:transparent;border-color:red;cursor:pointer;margin-left:10px}.button[_ngcontent-%COMP%] > .cancel[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:red}.button[_ngcontent-%COMP%] > .cancel[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{vertical-align:7px;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif}"]}),n})(),rt=(()=>{class n{constructor(e){this.service=e}ngOnInit(){}onChange(e){this.service.create(e).subscribe(o=>{history.back()})}onCancel(){history.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-contact-create-page"]],decls:1,vars:0,consts:[[3,"dataChange","cancel"]],template:function(e,o){1&e&&(t.TgZ(0,"app-google-contacts-form",0),t.NdJ("dataChange",function(s){return o.onChange(s)})("cancel",function(){return o.onCancel()}),t.qZA())},directives:[ot],styles:[""]}),n})();function it(n,r){if(1&n&&(t.TgZ(0,"div",10),t._UZ(1,"img",11),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.s9C("src",e.url,t.LSH)}}function st(n,r){if(1&n&&(t.TgZ(0,"div",12),t.TgZ(1,"b"),t._uU(2,"Name"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.xp6(4),t.Oqu(e.displayName)}}function at(n,r){if(1&n&&(t.TgZ(0,"div",13),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=r.$implicit,o=r.index;t.xp6(2),t.hij("Email ",o+1,""),t.xp6(2),t.Oqu(e.value)}}function ct(n,r){if(1&n&&(t.TgZ(0,"div",14),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=r.$implicit,o=r.index;t.xp6(2),t.hij("Phone ",o+1,""),t.xp6(2),t.Oqu(e.value)}}function lt(n,r){if(1&n&&(t.TgZ(0,"div",4),t.YNc(1,it,2,1,"div",5),t.TgZ(2,"div",6),t.YNc(3,st,5,1,"div",7),t.YNc(4,at,5,2,"div",8),t.YNc(5,ct,5,2,"div",9),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e.photos),t.xp6(2),t.Q6J("ngForOf",e.names),t.xp6(1),t.Q6J("ngForOf",e.emailAddresses),t.xp6(1),t.Q6J("ngForOf",e.phoneNumbers)}}function gt(n,r){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,lt,6,4,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data.connections)}}function ut(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",15),t._UZ(1,"circle",16),t.qZA())}let pt=(()=>{class n{constructor(){this.data=null}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-contacts-list"]],inputs:{data:"data"},decls:3,vars:2,consts:[["class","contact-container",4,"ngIf","ngIfElse"],["loading",""],[1,"contact-container"],["class","contact-list",4,"ngFor","ngForOf"],[1,"contact-list"],["id","picture","class","picture",4,"ngFor","ngForOf"],[1,"info"],["class","name",4,"ngFor","ngForOf"],["class","email",4,"ngFor","ngForOf"],["class","phone",4,"ngFor","ngForOf"],["id","picture",1,"picture"],[3,"src"],[1,"name"],[1,"email"],[1,"phone"],["viewBox","0 0 50 50",1,"loading-spinner"],["cx","25","cy","25","r","20","fill","none","stroke-width","7.5",1,"path"]],template:function(e,o){if(1&e&&(t.YNc(0,gt,2,1,"div",0),t.YNc(1,ut,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",o.data)("ngIfElse",i)}},directives:[g.O5,g.sg],styles:['.contact-container[_ngcontent-%COMP%]{margin:2em 0 5em}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%]{height:150px;display:grid;grid-template:80px/110px auto auto;padding:0 30% 0 40%;text-align:left}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{font-family:Times New Roman,Times,serif}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{padding-right:10px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .name[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:after{padding-left:1ch;content:":";font-family:monospace;font-size:16px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .email[_ngcontent-%COMP%]{padding-top:5px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .email[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{padding-right:10px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .email[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:after{padding-left:1ch;content:":";font-family:monospace;font-size:16px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .phone[_ngcontent-%COMP%]{padding-top:5px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .phone[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]{padding-right:10px}.contact-container[_ngcontent-%COMP%] > .contact-list[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > .phone[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:after{padding-left:1ch;content:":";font-family:monospace;font-size:16px}']}),n})(),mt=(()=>{class n{constructor(e){this.service=e}ngOnInit(){this.data$=this.service.getAll()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-contacts-list-page"]],decls:5,vars:3,consts:[[1,"link"],["routerLink","./create"],[3,"data"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t._uU(2," Create Contacts "),t.qZA(),t.qZA(),t._UZ(3,"app-google-contacts-list",2),t.ALo(4,"async")),2&e&&(t.xp6(3),t.Q6J("data",t.lcZ(4,1,o.data$)))},directives:[f.yS,pt],pipes:[g.Ov],styles:[".link[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;font-size:large}.link[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}"]}),n})();const k="https://www.googleapis.com/calendar/v3/calendars/primary/events";let S=(()=>{class n{constructor(e,o){this.tokenService=e,this.http=o}getAll(e){const o=Object.assign({},e);return this.tokenService.getAuthorizationHeader().pipe((0,h.w)(i=>i?this.http.get(k,{headers:{Authorization:i},params:o}):(0,m.of)(null)),(0,p.U)(i=>(0,_.Sh)(i)))}create(e){return this.tokenService.getAuthorizationHeader().pipe((0,h.w)(o=>o?this.http.post(k,e,{headers:{Authorization:o}}):(0,m.of)(null)),(0,p.U)(o=>(0,_.RC)(o)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C),t.LFG(T.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dt=(()=>{class n{constructor(e){this.fb=e,this.onTouched=()=>{},this.subscriptions=[]}ngOnInit(){this.formGroup=this.fb.group({summary:[null,[a.kI.required]],start:this.fb.group({dateTime:[null,[a.kI.required]]}),end:this.fb.group({dateTime:[null,[a.kI.required]]})}),this.valueChanges$=this.formGroup.valueChanges.pipe((0,p.U)(e=>{var o,i;return(null===(o=e.start)||void 0===o?void 0:o.dateTime)&&(e.start.dateTime=new Date(e.start.dateTime).toISOString()),(null===(i=e.end)||void 0===i?void 0:i.dateTime)&&(e.end.dateTime=new Date(e.end.dateTime).toISOString()),e}))}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}writeValue(e){e&&this.formGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){const o=this.valueChanges$.subscribe(e);this.subscriptions.push(o)}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.formGroup.disable():this.formGroup.enable()}validate(e){if(!this.formGroup.invalid)return null;let o=Object.assign({},this.formGroup.errors);return["summary","start.dateTime","end.dateTime"].forEach(i=>{const s=this.formGroup.get(i);s.errors&&(o[i]=s.errors)}),o}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-event-control"]],features:[t._Bn([{provide:a.JU,useExisting:n,multi:!0},{provide:a.Cf,useExisting:n,multi:!0}])],decls:15,vars:1,consts:[[3,"formGroup"],["type","text","formControlName","summary",3,"blur"],["formGroupName","start"],["type","datetime-local","formControlName","dateTime",3,"blur"],["formGroupName","end"],["id","to-datetime","type","datetime-local","formControlName","dateTime",3,"blur"]],template:function(e,o){1&e&&(t.ynx(0,0),t.TgZ(1,"label"),t.TgZ(2,"b"),t._uU(3,"Summary"),t.qZA(),t.TgZ(4,"input",1),t.NdJ("blur",function(){return o.onTouched()}),t.qZA(),t.qZA(),t.TgZ(5,"div"),t.TgZ(6,"label"),t.TgZ(7,"b"),t._uU(8,"Time Range"),t.qZA(),t.ynx(9,2),t.TgZ(10,"input",3),t.NdJ("blur",function(){return o.onTouched()}),t.qZA(),t.TgZ(11,"label"),t._uU(12,"To"),t.qZA(),t.BQk(),t.ynx(13,4),t.TgZ(14,"input",5),t.NdJ("blur",function(){return o.onTouched()}),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.BQk()),2&e&&t.Q6J("formGroup",o.formGroup)},directives:[a.JL,a.sg,a.Fj,a.JJ,a.u,a.x0],styles:[""]}),n})(),ft=(()=>{class n{constructor(e){this.fb=e,this.data=null,this.dataChange=new t.vpe,this.cancel=new t.vpe,this.errorMsg=null}ngOnInit(){this.formGroup=this.fb.group({eventResource:[this.data,[a.kI.required]]})}onSubmit(){if(this.errorMsg=null,this.formGroup.invalid)this.errorMsg="Invalid form data!!!";else{const e=this.formGroup.get("eventResource");this.dataChange.emit(e.value)}}onCancel(){this.cancel.emit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-event-form"]],inputs:{data:"data"},outputs:{dataChange:"dataChange",cancel:"cancel"},decls:7,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","eventResource"],["type","submit"],["type","button",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t._UZ(1,"app-google-event-control",1),t.TgZ(2,"div"),t.TgZ(3,"button",2),t._uU(4," Save "),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return o.onCancel()}),t._uU(6," Cancel "),t.qZA(),t.qZA(),t.qZA()),2&e&&t.Q6J("formGroup",o.formGroup)},directives:[a._Y,a.JL,a.sg,dt,a.JJ,a.u],styles:[""]}),n})(),ht=(()=>{class n{constructor(e){this.service=e}ngOnInit(){}onChange(e){this.service.create(e).subscribe(o=>{history.back()})}onCancel(){history.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-event-create-page"]],decls:1,vars:0,consts:[[3,"dataChange","cancel"]],template:function(e,o){1&e&&(t.TgZ(0,"app-google-event-form",0),t.NdJ("dataChange",function(s){return o.onChange(s)})("cancel",function(){return o.onCancel()}),t.qZA())},directives:[ft],styles:[""]}),n})();function _t(n,r){if(1&n&&(t.TgZ(0,"a",3),t.TgZ(1,"h4"),t._uU(2),t.qZA(),t.TgZ(3,"small"),t._uU(4),t.qZA(),t.qZA()),2&n){const e=r.$implicit;t.Q6J("href",e.htmlLink,t.LSH),t.xp6(2),t.hij(" ",e.summary," "),t.xp6(2),t.AsE(" ",e.start.dateTime," - ",e.end.dateTime," ")}}function Ct(n,r){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,_t,5,4,"a",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data.items)}}function vt(n,r){1&n&&(t.O4$(),t.TgZ(0,"svg",4),t._UZ(1,"circle",5),t.qZA())}let Tt=(()=>{class n{constructor(){this.data=null}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-events-list"]],inputs:{data:"data"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],["target","_blank","class","item-list",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"item-list",3,"href"],["viewBox","0 0 50 50",1,"loading-spinner"],["cx","25","cy","25","r","20","fill","none","stroke-width","7.5",1,"path"]],template:function(e,o){if(1&e&&(t.YNc(0,Ct,2,1,"div",0),t.YNc(1,vt,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(2);t.Q6J("ngIf",o.data)("ngIfElse",i)}},directives:[g.O5,g.sg],styles:[""]}),n})(),Zt=(()=>{class n{constructor(e){this.service=e}ngOnInit(){const e=new Date;this.data$=this.service.getAll({singleEvents:!0,orderBy:"startTime",timeMin:e.toISOString()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google-evevts-list-page"]],decls:5,vars:3,consts:[[1,"link"],["routerLink","./create"],[3,"data"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t._uU(2," Create Events "),t.qZA(),t.qZA(),t._UZ(3,"app-google-events-list",2),t.ALo(4,"async")),2&e&&(t.xp6(3),t.Q6J("data",t.lcZ(4,1,o.data$)))},directives:[f.yS,Tt],pipes:[g.Ov],styles:[".link[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;font-size:large}.link[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:#000;text-decoration:underline}"]}),n})();function bt(n,r){if(1&n&&(t.TgZ(0,"div"),t.TgZ(1,"a",11),t.ALo(2,"async"),t._uU(3,"Login Google"),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("href",t.lcZ(2,1,e.authorizationLinks$),t.LSH)}}function yt(n,r){1&n&&t._UZ(0,"router-outlet")}const Gt=[{path:"authorization",component:H},{path:"",component:(()=>{class n{constructor(e){this.TokenService=e}ngOnInit(){this.tokenReady$=this.TokenService.tokenReady$,this.authorizationLinks$=this.TokenService.getAuthorizationLink()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-google"]],decls:22,vars:5,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://fonts.googleapis.com/icon?family=Material+Icons"],["rel","stylesheet","type","text/css","href","//use.fontawesome.com/releases/v5.7.2/css/all.css"],[1,"cmp-nav"],["routerLink","./events","routerLinkActive","st-active"],["routerLink","./contacts","routerLinkActive","st-active"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"href"]],template:function(e,o){1&e&&(t.TgZ(0,"html",0),t.TgZ(1,"head"),t._UZ(2,"meta",1),t._UZ(3,"meta",2),t._UZ(4,"meta",3),t._UZ(5,"link",4),t._UZ(6,"link",5),t.qZA(),t.TgZ(7,"body"),t.TgZ(8,"h2"),t._uU(9,"Google"),t.qZA(),t.TgZ(10,"nav",6),t.TgZ(11,"ul"),t.TgZ(12,"li"),t.TgZ(13,"a",7),t._uU(14,"Events"),t.qZA(),t.qZA(),t.TgZ(15,"li"),t.TgZ(16,"a",8),t._uU(17,"Contacts"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.ynx(18,9),t.ALo(19,"async"),t.YNc(20,bt,4,3,"div",10),t.YNc(21,yt,1,0,"router-outlet",10),t.BQk(),t.qZA(),t.qZA()),2&e&&(t.xp6(18),t.Q6J("ngSwitch",t.lcZ(19,3,o.tokenReady$)),t.xp6(2),t.Q6J("ngSwitchCase",!1),t.xp6(1),t.Q6J("ngSwitchCase",!0))},directives:[f.yS,f.Od,g.RF,g.n9,f.lC],pipes:[g.Ov],styles:[""]}),n})(),children:[{path:"",redirectTo:"events",pathMatch:"full"},{path:"events",component:Zt},{path:"events/create",component:ht},{path:"contacts",component:mt},{path:"contacts/create",component:rt}]}];let At=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[f.Bz.forChild(Gt)],f.Bz]}),n})(),Ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,a.UX]]}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,At,Ot]]}),n})()}}]);